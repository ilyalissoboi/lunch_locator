<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lunch locator by ilyalissoboi</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <!-- sha1 -->
    <script src="https://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha1.js"></script>
    <!-- sha256 -->
    <script src="https://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha256.js"></script>

    <script src="https://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-base64-min.js"></script>
    <script src="javascripts/oauth-1.0a.js"></script>
    <script src="javascripts/scale.fix.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/prettyprint.js"></script>
    <script type="text/javascript">
      var output;

      var request_data = {
          url: 'https://api.yelp.com/v2/search',
          method: 'GET',
          data: {
            search: 'food',
            ll: '',
            radius_filter: 1000
          }
      };

      $( document ).ready(function() {
        // setup OAuth
        var oauth = OAuth({
          consumer: {
            public: 'kH_OonHE9LhcStkXPFnCyQ',
            secret: 'C8Snl5jVRVb6BB5x4NRqED8Msio'
          },
          signature_method: 'HMAC-SHA1'
        });

        var token = {
            public: 'KAqeR0tF4n58mJzmlpoN_L1nIaVKbNW0',
            secret: '6pnca-SLGZbbSpUssOtS-dINsno'
        };

        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(loc_success, loc_error);
        } else {
          console.log('geolocation not supported');
        }

        function loc_success(position) {
          request_data.data.ll = position.coords.latitude + ',' + position.coords.longitude;

          $.ajax({
              url: request_data.url,
              type: request_data.method,
              data: oauth.authorize(request_data, token)
          }).done(function(data) {
            console.log(data);
            container = $('#yelp_output');
            for (var i = data.businesses.length - 1; i >= 0; i--) {
              li = $('<li></li>');
              li.html($data.businesses[i].name);
              li.appendTo(container);
            };
          });
        }

        function loc_error(msg) {
          console.log('error: ' + msg);
        }
      });
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Lunch locator</h1>
        <p>Web app suggesting locations for eating lunch</p>
        <p class="view"><a href="https://github.com/ilyalissoboi/lunch_locator">View the Project on GitHub <small>ilyalissoboi/lunch_locator</small></a></p>
        <ul>
          <li><a href="https://github.com/ilyalissoboi/lunch_locator/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/ilyalissoboi/lunch_locator/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/ilyalissoboi/lunch_locator">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1><a id="lunch_locator" class="anchor" href="#lunch_locator" aria-hidden="true"><span class="octicon octicon-link"></span></a>lunch_locator</h1>
        <p>Yelp search result:</p>
        <div><ul id="yelp_output"></ul></div>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/ilyalissoboi">ilyalissoboi</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
